package de.hochschuletrier.gdw.ws1415.sandbox.menu;

import java.awt.MouseInfo;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionAdapter;

import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.scenes.scene2d.InputEvent;
import com.badlogic.gdx.scenes.scene2d.InputListener;
import com.badlogic.gdx.scenes.scene2d.ui.Skin;
import com.badlogic.gdx.scenes.scene2d.utils.ClickListener;
import de.hochschuletrier.gdw.commons.gdx.state.transition.SplitHorizontalTransition;
import de.hochschuletrier.gdw.ws1415.sandbox.credits.Credits;
import de.hochschuletrier.gdw.ws1415.states.GameplayState;
import de.hochschuletrier.gdw.commons.gdx.menu.MenuManager;
import de.hochschuletrier.gdw.commons.gdx.menu.widgets.DecoImage;
import de.hochschuletrier.gdw.commons.gdx.menu.widgets.RotatingDecoImage;

import java.awt.Cursor;


public class MainMenu extends MenuPage{
    
    DecoImage start = new DecoImage(assetManager.getTexture("start_button"));
    DecoImage optionen = new DecoImage(assetManager.getTexture("optionen_button"));
    DecoImage credits = new DecoImage(assetManager.getTexture("credits_button"));
    DecoImage ende = new DecoImage(assetManager.getTexture("beenden_button"));
    DecoImage highscore = new DecoImage(assetManager.getTexture("start_button"));
    //DecoImage hand=new DecoImage(assetManager.getTexture("zeigefinger"));
    Credits credit = new Credits();
    
    public enum Type {
        MAINMENU,
        INGAME
    }
    
    public MainMenu(Skin skin, MenuManager menuManager, Type type)
    {
        super(skin,"background_menu" );
        int x = 960;
        int i = 1;
        int y = 810;
        int yStep = 100;
<<<<<<< HEAD
            
          
          addPageEntry(menuManager,x,y-yStep*(++i), optionen, new OptionMenu(skin, menuManager));
        addPageEntry(menuManager,x,y-yStep*(++i),credits, new CreditsMenu(skin, menuManager));
        //addPageEntry(menuManager,x,y-yStep*(++i),ende, new OptionMenu(skin, menuManager));
        addPageEntry(menuManager, x, y-yStep*(++i), highscore, new ScoreMenu(skin, menuManager));
        addPageEntryStart(menuManager,x,y-yStep*1, start, new OptionMenu(skin, menuManager));
//        addCenteredImage((int)(x-(ende.getWidth()/2)), y-yStep*(++i), (int)credits.getWidth(), (int)credits.getHeight()/2, credits, ()-> updateCredits());
        addCenteredImage((int)(x-(ende.getWidth()/2)), y-yStep*(++i),(int)ende.getWidth(),(int)ende.getHeight()/2, ende, ()->System.exit(0));
=======
        
            addPageEntry(menuManager,x,y-yStep*(++i), optionen, new OptionMenu(skin, menuManager));
            //addPageEntry(menuManager,x,y-yStep*(i++),credits, new OptionMenu(skin, menuManager));
            //addPageEntry(menuManager,x,y-yStep*(i++),ende, new OptionMenu(skin, menuManager));
            addPageEntry(menuManager, x, y-yStep*(++i), highscore, new ScoreMenu(skin, menuManager));
        	addPageEntryStart(menuManager,x,y-yStep*1, start, new OptionMenu(skin, menuManager));
            addCenteredImage((int)(x-(ende.getWidth()/2)), y-yStep*(++i), (int)credits.getWidth(), (int)credits.getHeight()/2, credits, ()-> updateCredits());
            addCenteredImage((int)(x-(ende.getWidth()/2)), y-yStep*(++i),(int)ende.getWidth(),(int)ende.getHeight()/2, ende, ()->System.exit(0));
>>>>>>> fdb92b17188d518b655c269e9575bbc7abdb5521
        //addCenteredButton(menuManager.getWidth() - 80, 54, 100, 40, "Testbutton", () -> System.exit(-1));
        //addGear(hand);
    }
    
    private void updateCredits()
    {
    	credit.init(assetManager);
    	credit.update(60);
    }

    
    protected final void addPageEntry(MenuManager menuManager, int x, int y, DecoImage image, MenuPage page) {
        menuManager.addLayer(page);
        
        addCenteredImage((int)(x-(image.getWidth()/2)), y, (int)image.getWidth(), (int)image.getHeight(), image, () -> menuManager.pushPage(page));
        
    }
    
    protected final void addPageEntryStart(MenuManager menuManager, int x, int y, DecoImage image, MenuPage page) {
        menuManager.addLayer(page);
        
        addCenteredImage((int)(x-(image.getWidth()/2)), y, (int)image.getWidth(), (int)image.getHeight(), image, () ->  main.changeState(new GameplayState(assetManager),new SplitHorizontalTransition(500), null));
        
    }
   /*private void addGear(DecoImage image) {
        //final Texture texture = assetManager.getTexture(name);
        //final DecoImage decoImage = new DecoImage(texture);
        //
        addListener(new InputListener() {
            public void mouseMoved(MouseEvent e) {
                image.setPosition(MouseInfo.getPointerInfo().getLocation().x,MouseInfo.getPointerInfo().getLocation().y); 
               
            }
        });
        addActor(image);
    }*/
    
}
